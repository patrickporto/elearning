{% extends "base.html" %}
{% load compress %}
{% load static %}

{% block extra_head %}
    {{ block.super }}
    {% compress css %}
    <link type="text/x-scss" rel="stylesheet" href="{% static "css/messenger.scss" %}">
    {% endcompress %}
{% endblock %}

{% block after_body %}
    {{ block.super }}
    {% compress js %}
    <script type="text/es6" src="{% static "messenger.js" %}"></script>
    {% endcompress %}
{% endblock %}

{% block content %}
<div class="row">
    <div class="col s3">
        <ul class="collection">
            {% for turma in turmas %}
            <li class="collection-item avatar">
                <a href="{% url 'turma' turma.id %}">
                    <i class="material-icons circle green">insert_chart</i>
                    <span class="title">{{turma.disciplina.nome}}</span>
                    <p>First Line</p>
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    <div class="col s9" id="messenger" data-room-name="{{turma_atual.id}}">
        <div class="row">
            <chat-history>
                <chat-message v-for="(item, index) in chatLog" :key="index"
                    :messages="item.messages" :author="item.author" :sending-date="item.sendingDate" />
            </chat-history>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input id="message-input" type="text" class="validate"
                    v-model="messageInput" v-on:keyup.enter="send" />
                <label for="message-input">Sua resposta</label>
            </div>
        </div>
    </div>
</div>
{% endblock %}
